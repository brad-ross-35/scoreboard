<!DOCTYPE html>
<html>
	<head>
		<title>Knowledge Bowl Scoreboard</title>

		<link rel="stylesheet" type="text/css" href="./lib/bootstrap.min.css">
		<link rel="stylesheet" type="text/css" href="./style.css">
	</head>
	<body>
		<script data-template-name="application" type="text/x-handlebars">
			<div class="container">
				{{outlet bracketCreation}}
				<div class="row">
					<div id="bracket" class="col-xs-8">
					{{render "bracket"}}
					</div>
					<div id="match" class="col-xs-4">
					{{outlet match}}
					</div>
				</div>
			</div>
		</script>

		<script data-template-name="bracketCreation" type="text/x-handlebars">
			<button {{action "createBracket"}}>Create Bracket</button>
		</script>

		<script data-template-name="bracket" type="text/x-handlebars">
			<h1>Bracket:</h1>
			{{#unless isFirstRound}}{{#link-to "round" previousRound}}&lt;-{{/link-to}}{{/unless}}
			{{#unless isSecondToLastRound}}{{#link-to "round" nextRound}}-&gt;{{/link-to}}{{/unless}}
			<div class="row">
				<div class="col-xs-6">
				{{outlet currentRound}}
				</div>
				<div class="col-xs-6">
				{{outlet nextRound}}
				</div>
			</div>
		</script>

		<script data-template-name="round" type="text/x-handlebars">
			{{#if model}}<h3>Round {{id}}</h3>{{/if}}
			{{#each match in matches}}
				{{#with match}}
					<p>{{firstTeam.name}} - {{firstTeamScore}}</p>
					<p>{{secondTeam.name}} - {{secondTeamScore}}</p>
					<p>Finalized: {{finalized}}</p>
				{{/with}}
				{{#link-to "match" match}}Play{{/link-to}}
				<hr>
			{{/each}}
		</script>

		<script data-template-name="match" type="text/x-handlebars">
		<h1>Current Match</h1>
		{{render "team" firstTeam}}
		<p>{{firstTeam.name}} - {{firstTeamScore}} <button {{action "incrementScore" 0}}>+</button></p>
		<p>vs.</p>
		<p>{{secondTeam.name}} - {{secondTeamScore}} <button {{action "incrementScore" 1}}>+</button></p>
		<p>winner: {{winner.name}}</p>
		<button {{action "finalize" id}}>Finalize {{finalized}}</button>
		</script>

		<script data-template-name="team" type="text/x-handlebars">
			<p>{{name}} - {{firstTeamScore}}
				<button {{action "incrementScore"}}>+</button>
				<button {{action "decrementScore"}}>+</button></p>
		</script>

		<script type="text/javascript" src="./lib/jquery-1.11.0.js"></script>
		<script type="text/javascript" src="./lib/handlebars-1.1.2.js"></script>
		<script type="text/javascript" src="./lib/ember-1.4.0.js"></script>
		<script type="text/javascript" src="./lib/ember-data-1.0.0-beta7.js"></script>
		<script type="text/javascript" src="./scoreboard.js"></script>
	</body>
</html>